# Server

## Ativar a chamada de retorno do cliente

### lib.callback

A resposta é tratada numa coroutine separada.

```lua
lib.callback(name, playerId, cb, ...)
```

- name: `string`
- playerId: `number`
- cb: `function`
- ...: `any`

```lua
lib.callback('ox:getNearbyVehicles', source, function(vehicles)
    for i = 1, #vehicles do
        DeleteEntity(entity)
    end
end, args.radius)
```

### lib.callback.await

A corrotina atual é cedida até ser recebida uma resposta.

```lua
lib.callback.await(name, playerId, ...)
```

- name: `string`
- playerId: `number`
- ...: `any`

```lua
local vehicles = lib.callback.await('ox:getNearbyVehicles', source, args.radius)

for i = 1, #vehicles do
    DeleteEntity(entity)
end
```

## Registar a chamada de retorno do servidor

### lib.callback.register

Registar um manipulador de eventos para responder a pedidos de clientes.

```lua
lib.callback.register(name, cb)
```

- name: `string`
- cb: `function`

```lua
lib.callback.register('ox_inventory:getItemCount', function(source, item, metadata, target)
    local inventory = target and Inventory(target) or Inventory(source)
    return (inventory and Inventory.GetItem(inventory, item, metadata, true)) or 0
end)
```
